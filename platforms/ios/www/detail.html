<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, target-densitydpi=device-dpi" />
       
        <link rel="stylesheet" type="text/css" href="css/detail.css" />
        <link href="css/photoswipe.css" type="text/css" rel="stylesheet" />
        <style type="text/css">
            #Gallery { display: none; }
        </style>
        <meta name="msapplication-tap-highlight" content="no" />
        <title>Forrest App</title>
        <script src='js/jquery/jquery-1.4.4.min.js'></script>
        <script src='js/jquery/jquery-ui-1.8.2.min.js'></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/simple-inheritance.min.js"></script>
        <script type="text/javascript" src="js/code-photoswipe-jQuery-1.0.11.min.js"></script>
        <script type="text/javascript">
        /*
        document.addEventListener('DOMContentLoaded', function(){
            Code.PhotoSwipe.Current.setOptions( { zIndex: 0, captionAndToolbarHide : true } );
            var thumbEls = Code.photoSwipe('a', '#Gallery', { preventHide: true } );
            Code.PhotoSwipe.Current.show(0);
        }, false);
        */
        function goBack() {  window.location.href = './home.html';  }
        </script>
        <script type="text/javascript" charset="utf-8">
        function onLoad() {
            document.addEventListener( "deviceready", onDeviceReady, false );
            document.addEventListener( "orientationchange", onOrientationChange, false );
            
          //  gettingVars();
        }
        function onDeviceReady() {
            console.log("device ready que le dicen");
            gettingVars();
        }
        function onOrientationChange(e){
            console.log("orientationnn___"+window.width);
        }
        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                vars[key] = value;
            });
            return vars;
        }
          function gettingVars2(){
              var idparque = getUrlVars()[ "idparque" ];
              return idparque;
          }
        function gettingVars(){
            var idparque = getUrlVars()[ "idparque" ];
             changeurlLinks();
            getJsonDataGallery( idparque );

           // idP = idparque;
        }
        function changeurlLinks(parque){
            $('#link1').attr('href','./moreinfo.html?idparque='+parque)
            $('#link2').attr('href','./map.html?idparque='+parque)
            $('#link3').attr('href','./dataSheet.html?idparque='+parque)
            $('#link4').attr('href','./services.html?idparque='+parque)
        }
        function getJsonDataGallery( parque ){
            $.ajax({
                url: "http://www.electronicvideogame.com/pnacionales/jsonServices/parqueInfo.php?idparque=" + parque,
                type: "GET",
                dataType: "json",
                async:false,
                 success: function( data, status ){
                     JsonpCallback( data );
                },
                error: function () {
                    ErrorFunction();
                }
            });
        }
        function JsonpCallback( json ){
            jQuery.each(json, function( i, val ) {
                
                /*
                jQuery.each( val.album, function( i2, val2 ) {
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/grids/1.png\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                });
                */
                if (gettingVars2()==1){

                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/1.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/2.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/3.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/4.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/5.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/6.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );       

                }
                if (gettingVars2()==2){

                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/7.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/8.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/9.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/10.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/11.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/12.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );      
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/13.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/14.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );   

                }
                 if (gettingVars2()==3){

                    $( '#mySliderCont' ).append( "<div class=\"gallery-item\"><a href=\"./img/imagenesapp/15.jpg\"><img src=\"./img/grids/1.png\" alt=\"img\" /></a></div>" );    
                }

                $( "#link1" ).attr( "href", "./moreinfo.html?idparque="+val.idparque );
                $( "#link2" ).attr( "href", "./map.html?idparque="+val.idparque );
                $( "#link3" ).attr( "href", "./dataSheet.html?idparque="+val.idparque );
                $( "#link4" ).attr( "href", "./services.html?idparque="+val.idparque );
            });
            Code.PhotoSwipe.Current.setOptions( { zIndex: 0, captionAndToolbarHide : true } );
            var thumbEls = Code.photoSwipe('a', '#Gallery', { preventHide: true } );
            Code.PhotoSwipe.Current.show( 0 );

             //$('.ps-viewport').css('height','80%');
             console.log("altura_"+window.screen.height);

             if ( window.screen.height >568 ){
                $('.ps-viewport').css('height', "calc(100% - 10px)" );
                $('.ps-viewport').css('margin-top','100px');
                $('.ps-slider-item').css('height','100%');
             }else{
                 console.log("esiphone");
                $('.ps-viewport').css('height', "calc(100% - 120px)" );
                $('.ps-viewport').css('margin-top','80px');
                $('.ps-slider-item').css('height','100%');
             }
        }
        </script>
    </head>
    <body onload="onLoad()">
            
        <div id="page2">
           <div id="UpSection">
                <div id="btnLeftUp" onClick="goBack();"></div>
                <div id="logoUp"></div>
           </div>
           <div id="DownSection">
                <div id="Gallery">
                        <div id="mySliderCont" class="gallery-row">
                        <!--
                        <div class="gallery-item"><a href="./img/detail/detailPhoto1.jpg"><img src="./img/detail/detailPhoto1.jpg" alt="Image 001" /></a></div>
                        
                        <div class="gallery-item"><a href="./img/detail/detailPhoto2.jpg"><img src="./img/detail/detailPhoto2.jpg" alt="Image 002" /></a></div>
                        
                        <div class="gallery-item"><a href="./img/detail/detailPhoto3.jpg"><img src="./img/detail/detailPhoto3.jpg" alt="Image 003" /></a></div>
                        -->
                    </div>
                </div>     
           </div>
           <div id="footer">
                <div id="footerBtns">
                    <div class="btnRadio btnLeft">
                        <div id="photoSelect"><a id="link1" href="./moreinfo.html">More Information</a></div>
                    </div>
                    <div class="btnRadio btnCnter">
                        <div id="gridSelect"><a id="link2" href="./map.html">Map</a></div>
                    </div>
                    <div class="btnRadio btnCnter">
                        <div id="photoSelect"><a id="link3" href="./dataSheet.html">Datasheet</a></div>
                    </div>
                    <div class="btnRadio btnRight">
                        <div id="gridSelect"><a id="link4" href="./services.html">Services</a></div>
                    </div>
                </div>
           </div>
       
    </body>
</html>
